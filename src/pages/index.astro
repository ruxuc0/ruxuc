---
import "../styles/global.css";

const posts = await Astro.glob("../content/posts/*.mdx");
const sortedPosts = posts.sort((a, b) => 
  new Date(b.frontmatter.created_at).getTime() - new Date(a.frontmatter.created_at).getTime()
);
---

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <link rel="icon" type="image/svg+xml" href="/favicon.svg" />
    <meta name="viewport" content="width=device-width" />
    <meta name="generator" content={Astro.generator} />
    <title>ruxuc</title>
  </head>
  <body>
    <div class="container mx-auto max-w-4xl px-6 py-8">
      <header class="mb-8">
        <div class="border border-neon-green/30 p-6 rounded-lg bg-gray-900/50">
          <h1 class="text-3xl mb-4">
            <span class="terminal-prompt">ruxuc@ruxuc:~$</span> 
            <span class="text-neon-green">whoami</span>
            <span class="terminal-cursor">_</span>
          </h1>
          <p class="text-sm text-neon-green/60">
            [STATUS: ACTIVE] | [UPTIME: INDEFINITE] | [ACCESS: PUBLIC]
          </p>
        </div>
      </header>

      <main>
        <section class="mb-8">
          <h2 class="text-xl mb-4 text-neon-cyan">
            <span class="terminal-prompt">$</span> ls -la posts/
          </h2>
          
          <div class="space-y-4">
            {sortedPosts.map((post) => (
              <article class="border border-neon-green/30 p-4 rounded bg-gray-900/30 hover:bg-gray-900/50 transition-colors">
                <div class="flex items-center justify-between mb-2">
                  <h3 class="text-lg">
                    <a href={"/posts/" + post.file.split("/").pop()?.replace(".mdx", "")} 
                       class="text-neon-blue hover:text-neon-cyan no-underline">
                      {post.frontmatter.title}
                    </a>
                  </h3>
                  <time class="text-sm text-neon-green/60 font-mono">
                    {new Date(post.frontmatter.created_at).toISOString().split("T")[0]}
                  </time>
                </div>
                {post.frontmatter.description && (
                  <p class="text-sm text-neon-green/80">
                    {post.frontmatter.description}
                  </p>
                )}
              </article>
            ))}
          </div>
        </section>
      </main>

      <footer class="mt-16 pt-8 border-t border-neon-green/30">
        <p class="text-center text-sm text-neon-green/60">
          <span class="terminal-prompt">$</span> echo "end of transmission"
        </p>
      </footer>
    </div>
  </body>
</html>
